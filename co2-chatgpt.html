<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CO2 Ausstoß Liste</title>
<style>
    table {
        border-collapse: collapse;
        width: 100%;
    }

    th, td {
        border: 1px solid #dddddd;
        text-align: left;
        padding: 8px;
    }

    th {
        background-color: #5cb85c; /* Hintergrundfarbe für den Header */
        color: #fff; /* Textfarbe für den Header */
        cursor: pointer; /* Make the table headers clickable for sorting */
        position: relative;
    }

    tr:nth-child(even) {
        background-color: #ffffff; /* Set all rows to white */
    }

    .filter-container {
        margin-bottom: 10px;
    }

    .filter-dropdown {
        padding: 5px;
        margin-right: 10px;
    }
</style>
</head>
<body>

<div class="filter-container">
    <label for="filterLand">Land:</label>
    <select id="filterLand" class="filter-dropdown" onchange="filterTable(0)">
        <option value="">Alle</option>
    </select>
    <label for="filterFirma">Verantwortliche Firma:</label>
    <select id="filterFirma" class="filter-dropdown" onchange="filterTable(1)">
        <option value="">Alle</option>
    </select>
    <label for="filterCO2">CO2 Ausstoß (Mio t):</label>
    <select id="filterCO2" class="filter-dropdown" onchange="filterTable(2)">
        <option value="">Alle</option>
    </select>
</div>

<h2>CO2 Ausstoß Liste</h2>

<table id="co2Table">
  <thead>
    <tr>
      <th onclick="sortTable(0)" data-column="0">Land</th>
      <th onclick="sortTable(1)" data-column="1">Verantwortliche Firma</th>
      <th onclick="sortTable(2)" data-column="2">CO2 Ausstoß (Mio t)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>USA</td>
      <td>Example Inc.</td>
      <td>600</td>
    </tr>
    <tr>
      <td>China</td>
      <td>Global CO2 Corp.</td>
      <td>1000</td>
    </tr>
    <tr>
      <td>Russland</td>
      <td>Climate Killer Ltd.</td>
      <td>700</td>
    </tr>
    <tr>
      <td>Indien</td>
      <td>Pollution Industries</td>
      <td>450</td>
    </tr>
    <tr>
      <td>Japan</td>
      <td>Emissions Enterprises</td>
      <td>350</td>
    </tr>
    <tr>
      <td>Deutschland</td>
      <td>Carbon GmbH</td>
      <td>320</td>
    </tr>
    <tr>
      <td>Südkorea</td>
      <td>Carbon Emitters Ltd.</td>
      <td>310</td>
    </tr>
    <tr>
      <td>Iran</td>
      <td>Pollute Co.</td>
      <td>250</td>
    </tr>
    <tr>
      <td>Saudi-Arabien</td>
      <td>Petrochemicals Inc.</td>
      <td>240</td>
    </tr>
    <tr>
      <td>Kanada</td>
      <td>Oil & Gas Ltd.</td>
      <td>230</td>
    </tr>
  </tbody>
</table>

<script>
var sortingColumn = null;
var ascending = true;

function sortTable(columnIndex) {
    var table, rows, switching, i, x, y, shouldSwitch;
    table = document.getElementById("co2Table");
    switching = true;
    while (switching) {
        switching = false;
        rows = table.rows;
        for (i = 1; i < (rows.length - 1); i++) {
            shouldSwitch = false;
            x = rows[i].getElementsByTagName("td")[columnIndex];
            y = rows[i + 1].getElementsByTagName("td")[columnIndex];
            var xValue = isNaN(x.innerHTML) ? x.innerHTML.toLowerCase() : parseFloat(x.innerHTML);
            var yValue = isNaN(y.innerHTML) ? y.innerHTML.toLowerCase() : parseFloat(y.innerHTML);
            if (ascending ? (xValue > yValue) : (xValue < yValue)) {
                shouldSwitch = true;
                break;
            }
        }
        if (shouldSwitch) {
            rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
            switching = true;
        }
    }
    // Toggle ascending/descending
    ascending = !ascending;
    sortingColumn = columnIndex;
}

function filterTable(columnIndex) {
    var input, filter, table, tr, td, i, txtValue;
    input = document.getElementById("filter" + (columnIndex === 0 ? "Land" : columnIndex === 1 ? "Firma" : "CO2"));
    filter = input.value.toUpperCase();
    table = document.getElementById("co2Table");
    tr = table.getElementsByTagName("tr");
    for (i = 0; i < tr.length; i++) {
        td = tr[i].getElementsByTagName("td")[columnIndex];
        if (td) {
            txtValue = td.textContent || td.innerText;
            if (txtValue.toUpperCase().indexOf(filter) > -1) {
                tr[i].style.display = "";
            } else {
                tr[i].style.display = "none";
            }
        }
    }

    // Zurücksetzen der anderen Dropdowns
    var dropdowns = document.querySelectorAll(".filter-dropdown");
    dropdowns.forEach(function(dropdown, index) {
        if (index !== columnIndex) {
            dropdown.value = "";
        }
    });
}

// Funktion zum Befüllen der Dropdown-Menüs mit einzigartigen Werten aus jeder Spalte
function populateDropdowns() {
    var dropdowns = document.querySelectorAll(".filter-dropdown");
    dropdowns.forEach(function(dropdown, index) {
        var uniqueValues = getUniqueColumnValues(index);
        uniqueValues.sort(); // Sortiere die Werte alphabetisch
        uniqueValues.forEach(function(value) {
            var option = document.createElement("option");
            option.text = value;
            dropdown.add(option);
        });
    });
}

// Funktion zum Abrufen der einzigartigen Werte aus einer Spalte
function getUniqueColumnValues(columnIndex) {
    var table = document.getElementById("co2Table");
    var uniqueValues = [];
    var rows = table.rows;
    for (var i = 1; i < rows.length; i++) {
        var cell = rows[i].cells[columnIndex];
        var cellValue = cell.textContent.trim();
        if (!uniqueValues.includes(cellValue)) {
            uniqueValues.push(cellValue);
        }
    }
    return uniqueValues;
}

// Beim Laden der Seite Dropdown-Menüs erstellen und Event Listener hinzufügen
document.addEventListener("DOMContentLoaded", function() {
    populateDropdowns();
});

</script>

</body>
</html>
